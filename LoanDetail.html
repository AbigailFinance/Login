<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Loan Details</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Lato:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    .checklist-item {
      display: flex;
      align-items: flex-start;
    }

    .checklist-item div {
    font-size: 0.95rem;
    }

    :root {
      --navy: #022449;
      --teal: #055f79;
      --light: #ecebe8;
      --gold: #d99623;
      --white: #ffffff;
    }

    body {
      background-color: var(--light);
      font-family: 'Lato', sans-serif;
      color: var(--navy);
    }

    h1, h2, h3, h4 {
      font-family: 'Montserrat', sans-serif;
    }

    .dashboard-card {
      background: var(--white);
      border-radius: 1rem;
      padding: 1.75rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    }

    /* Stage Tracker */
    .stage-step {
      cursor: pointer;
      padding: 0.75rem;
      border-radius: 2rem;
      text-align: center;
      font-weight: 600;
      background: #dee2e6;
      color: #495057;
    }

    .stage-step.active {
      background: var(--gold);
      color: white;
    }

    .stage-step.completed {
      background: #198754;
      color: white;
    }

    /* Checklist */
    .checklist-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid #eee;
    }

    .checklist-item:last-child {
      border-bottom: none;
    }

    /* Stage Dropdown */
.stage-dropdown {
  display: flex;
  align-items: center;
  background: #f8f9fa;
  border-radius: 2rem;
  padding: 0.35rem 0.75rem;
  border: 1px solid #dee2e6;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.stage-dropdown i {
  color: var(--gold);
  font-size: 1.1rem;
}

.stage-select {
  border: none;
  background: transparent;
  font-weight: 600;
  color: var(--navy);
  padding-right: 1.75rem;
  min-width: 160px;
}

.stage-select:focus {
  box-shadow: none;
  outline: none;
}

.stage-select option {
  font-weight: 500;
}

.ellipsis-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--navy);
    }

    .navbar {
      background-color: var(--white);
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .navbar-brand img {
      max-height: 45px;
    }

  </style>
</head>

<body>
<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg px-4 py-3">
  <a class="navbar-brand" href="#">
    <img src="logo-horizontal.png" alt="Logo">
  </a>

  <div class="ms-auto d-flex align-items-center gap-3">

    <div class="position-relative">
  <input 
    type="text" 
    id="globalSearch"
    class="form-control search-input"
    placeholder="Search brokers, solicitors, customers..."
    autocomplete="off"
  >

  <div 
    id="searchResults" 
    class="list-group position-absolute w-100 shadow"
    style="z-index: 1000; display: none;">
  </div>
</div>


    <!-- Ellipsis Dropdown -->
    <div class="dropdown">
      <button class="ellipsis-btn" data-bs-toggle="dropdown">
        &#8942;
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li><a class="dropdown-item" href="CRMPAGE1.html">Dashboard</a></li>
        <li><a class="dropdown-item" href="Lead.html">Request Terms</a></li>
        <li><a class="dropdown-item" href="Customer.html">Customers</a></li>
        <li><a class="dropdown-item" href="Broker.html">Brokers</a></li>
        <li><a class="dropdown-item" href="Solicitor.html">Solicitors</a></li>
        <li><hr class="dropdown-divider"></li>
        <li>
          <a class="dropdown-item text-danger" href="CRMPAGE1.html" onclick="logout()">Logout</a>
        </li>
      </ul>
    </div>

  </div>
</nav>

<div class="container py-5">

  <!-- LOAN HEADER -->
  <div class="dashboard-card mb-4">
    <div class="d-flex justify-content-between align-items-start mb-3">

  <!-- Left: Company & Borrower -->
  <div>
    <h1 class="mb-1">Oakwood Developments Ltd</h1>
    <h3 class="mb-0">John Smith</h3>
  </div>

  <!-- Right: Stage Dropdown -->
  <div class="stage-dropdown">
  <i class="bi bi-arrow-down-circle-fill me-2"></i>
  <select class="form-select stage-select" id="stageSelect">
  <option value="prospect" selected>Prospect</option>
  <option value="deals">Deals</option>
  <option value="legals">In Legals</option>
  <option value="post">Post Completion</option>
  <option value="closed">Closed</option>
</select>


  
</div>

</div>  

    <!-- Loan info-->
    <div class="row">
        <div class="col-md-3">
            <div class="text-muted">
               Gross loan Amount:<br>Â£750,000
            </div>
        </div>

        <div class="col-md-3">
            <div class="text-muted">
               Security Address<br>45 Bridge Street, Leeds LS1 2AB
            </div>
        </div>

        <div class="col-md-3">
            <div class="text-muted">
               Loan Type<br>Retained
            </div>
        </div>

        <div class="col-md-3">
            <div class="text-muted">
               Rate<br>7.25%
            </div>
        </div>
    </div>

  </div>

  <!-- STAGE TRACKER -->
  <div class="dashboard-card mb-4">
    <div class="row g-2 text-center" id="stageTracker">
      <div class="col stage-step active" data-stage="prospect">Prospect</div>
      <div class="col stage-step" data-stage="deals">Deals</div>
      <div class="col stage-step" data-stage="legals">In Legals</div>
      <div class="col stage-step" data-stage="post">Post Completion</div>
      <div class="col stage-step" data-stage="closed">Closed</div>
    </div>
  </div>

  <!-- CHECKLIST -->
  <div class="dashboard-card">
    <h3 id="stageTitle" class="mb-3">Prospect Requirements</h3>

    <div id="checklistContainer"></div>
  </div>
<br>

  <!-- Notes Box -->
<div class="dashboard-card mb-4">
  <h5 class="mb-3">Notes</h5>

  <div class="border rounded p-3 bg-light">
    <p class="mb-0 text-muted">
      Paul Waters - 07/01/2026<p>Requested Signed OIP from Broker</p>
    </p>
    <br>
    <p class="mb-0 text-muted">
      Paul Waters - 05/01/2026<p>Sent OIP for signature</p>
    </p>
  </div>
</div>

</div>

<script>
  const stageData = {
    prospect: {
      title: "Prospect Requirements",
      items: ["OIP Sent"]
    },
    deals: {
      title: "Deals Requirements",
      items: ["OIP Signed", "Sizer Created", "Application Form", "Identity Check", "Toorak Instructed"]
    },
    legals: {
      title: "In Legals Requirements",
      items: ["Instruction Letter to Field Fisher",
                "Bank Statement (Deposit)",
                "Right to Remain",
                "Valuation Complete",
                "Borrower CV (if works funds)",
                "A&L",
                "Exit Plan",
                "Credit Report",
                "Building Insurance",
                "Schedule of Works (if applicable)",
                "Signed Security Documents",
                "Report on Title (ROT)",
                "Direct Debit Signed (If Interest Serviced)",
                "Land Reg",
                "Monitoring Survey Requested",
                "Monitoring Survey Received",
                "Monitoring Survey Received",
                "Facilities Letter Approved"]
    },
    post: {
      title: "Post Completion Requirements",
      items: ["Funds Released", "Charge Registered",
                "Evidence of Registered Charge",
                "Final FF Completion Statement",
                "Signed & Dated Security Docs",
                "Final Signed RoT"
      ]
    },
    closed: {
      title: "Closed",
      items: ["Loan Fully Repaid"]
    }
  };

  const checklistContainer = document.getElementById("checklistContainer");
  const stageTitle = document.getElementById("stageTitle");
  const stageSteps = document.querySelectorAll(".stage-step");

  function loadStage(stageKey) {
    const stage = stageData[stageKey];

    stageTitle.innerText = stage.title;
    checklistContainer.innerHTML = "";

    if (stageKey === "legals") {
  checklistContainer.innerHTML = `<div class="row g-2"></div>`;
  const row = checklistContainer.querySelector(".row");

  stage.items.forEach(item => {
    row.innerHTML += `
      <div class="col-md-4">
        <div class="checklist-item">
          <input type="checkbox" class="form-check-input">
          <div>${item}</div>
        </div>
      </div>
    `;
  });
} else {
  stage.items.forEach(item => {
    checklistContainer.innerHTML += `
      <div class="checklist-item">
        <input type="checkbox" class="form-check-input">
        <div>${item}</div>
      </div>
    `;
  });
}


    stageSteps.forEach(step => {
      step.classList.remove("active");
      if (step.dataset.stage === stageKey) {
        step.classList.add("active");
      }
    });
  }

  stageSteps.forEach(step => {
  step.addEventListener("click", () => {
    const stageKey = step.dataset.stage;
    stageSelect.value = stageKey;
    loadStage(stageKey);
  });
});


  // Initial load
  loadStage("prospect");
</script>

  <script>
    const stageSelect = document.getElementById("stageSelect");

stageSelect.addEventListener("change", () => {
  loadStage(stageSelect.value);
});

</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
